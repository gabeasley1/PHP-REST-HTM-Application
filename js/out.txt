var b=b||{};$(document).oa(function(){$(".navbar .header").click(function(a){a.preventDefault();$(a.target).j("add-item")||($(this).next().qa(),$(this).children("span").ra("ui-icon-triangle-1-e ui-icon-triangle-1-s"))}).append('<span class="add-item-outer"><span id="add-account" class="add-item"></span></span>').ma('<span class="ui-icon ui-icon-triangle-1-s"></span>');$("#accounts-list li a").append('<span class="edit-account"></span>');$("#tasks-list li a").append('<span class="edit-task"></span>');$("#edit-task-link").button({f:{h:"ui-icon-pencil"}}).d("font-size",
"85%").g("click",function(a){a.preventDefault();alert("This doesn't work yet.")});$("#delete-task-link").button({f:{h:"ui-icon-trash"}}).d("font-size","85%").g("click",function(a){a.preventDefault();alert("This doesn't work yet.")});$("#accounts-list li a").g("click",function(a){a.preventDefault();if(!$(a.target).j("edit-account")&&!$(this).parent().j("selected")){$("#tasks-list").empty();var d=$(this).i("href"),a=d.substring(d.indexOf("?")+1),d=d.substring(d.indexOf("user=")+5),c=unescape(d.substring(d.indexOf("&"))),
f=$(this);$.get("ajaxtasklist.php",a,function(a){$("#tasks-list").e(a);$("#tasks-list li:first a").click();$("#tasks-list li").size()==0&&$("#task-content").e("<h2 style='padding:10px 30px'>There are no tasks available to display.</h2>");$("#tasks-list li a").append('<span class="edit-task"></span>');a=f.parent();$("title").text("Task list for "+c);a.s(".selected").r("selected");a.o("selected")},"html")}});$("#tasks-list li a").g("click",function(a){a.preventDefault();if(!$(a.target).j("edit-task")&&
!$(this).parent().j("selected")){var a=$(this).i("href"),a=a.substring(a.indexOf("?")+1),d=$(this);$.get("ajaxtaskdescription.php",a,function(a){var c=d.parent();c.s(".selected").r("selected");c.o("selected");$("#task-content").e(a);$("#edit-task-link").button({f:{h:"ui-icon-pencil"}}).d("font-size","85%");$("#delete-task-link").button({f:{h:"ui-icon-trash"}}).d("font-size","85%")},"html")}});$("<div id='edit-account-menu' />").e("<ul><li class='edit'>Edit Account</li><li class='delete'>Unlink Account</li></ul>").p("body");
$("<div id='edit-task-menu' />").e("<ul><li class='edit'>Edit Task</li><li class='delete'>Delete Task</li></ul>").p("body");$(".edit-task").g("click",function(){$("#edit-account-menu").l(":visible")&&$("#edit-account-menu").k();if($("#edit-task-menu").l(":visible")&&$("#edit-task-menu").data("last-elem")==this)$("#edit-task-menu").k();else{$(this);console.log($(this).position());var a=$(this).position(),c={width:$(this).width(),height:$(this).height()};$("#edit-task-menu").d({top:a.top+c.height,left:a.left}).t("fast");
$("#edit-task-menu").data("last-elem",this)}});$(".edit-account").g("click",function(){$("#edit-task-menu").l(":visible")&&$("#edit-task-menu").k();if($("#edit-account-menu").l(":visible")&&$("#edit-account-menu").data("last-elem")==this)$("#edit-account-menu").k();else{$(this);var a=$(this).position(),c={width:$(this).width(),height:$(this).height()};$("#edit-account-menu").d({top:a.top+c.height,left:a.left}).t("fast");$("#edit-account-menu").data("last-elem",this)}});$("#edit-task-menu .edit").bind("click",
function(){var a=$($("#edit-account-menu").data("last-elem")).parent().i("href");$.get("ajaxtaskdescription.php",a.substring(a.indexOf("?")+1)+"&edit=1",function(a){$("#task-content").e(a);$("#task-save-button").button({f:{h:"ui-icon-disk"}}).click(function(){})})});$("#task-progress-edit-slider").u({na:"min",value:$("#task-progress-edit").m(),pa:function(a,c){$("#task-progress-edit").m(c.value)}});$("#task-progress-edit").ha(function(){$("#task-progress-edit-slider").u("value",$(this).m())});$("#task-start-date-edit").q();
$("#task-expiration-date-edit").q();$(".submit-section input[type=submit]").button({f:{h:"ui-icon-gear"}});$("#task-tags-edit").scroll(function(){var a=parseInt($(this).i("rows"));console.log(a);a<5&&(console.log("stretch"),$(this).i("rows",a+1))});var c=new b.a.n("task-details-rich-editor");c.c(new b.a.plugins.A);c.c(new b.a.plugins.Y);c.c(new b.a.plugins.ga);c.c(new b.a.plugins.S);c.c(new b.a.plugins.ba);c.c(new b.a.plugins.D);c.c(new b.a.plugins.J);c.c(new b.a.plugins.T("Click here to edit"));
c.c(new b.a.plugins.R);c.c(new b.a.plugins.Q);var e=b.v.a.C.la([b.a.b.z,b.a.b.L,b.a.b.da,b.a.b.G,b.a.b.w,b.a.b.H,b.a.b.I,b.a.b.P,b.a.b.ea,b.a.b.W,b.a.b.fa,b.a.b.U,b.a.b.K,b.a.b.V,b.a.b.N,b.a.b.M,b.a.b.O,b.a.b.$,b.a.b.aa,b.a.b.Z,b.a.b.X],$("#task-details-toolbar")[0]);new b.v.a.ca(c,e);b.ia.ka(c,b.a.n.F.B,function(){$("#task-details-edit").m(e.ja())})});
